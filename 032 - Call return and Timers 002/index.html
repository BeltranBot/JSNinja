<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Call Return and Timers</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
	<script src="../assets/js/asserts.js"></script>
	<link rel="stylesheet" href="../assets/css/styles.css">
  <style>
    #box {
      position: absolute;
      border: 3px solid blue;
      width: 200px;
      height: 200px;
      background-color: #6495ed;
      font-size: 2em;
    }
    #box2 {
      position: relative;
      border: 3px solid red;
      width: 200px;
      height: 200px;
      background-color: #6495ed;
      font-size: 2em;
    }
  </style>	
</head>
<body>
	<div id="box">ボックス</div>
  <script>
    function animateIt(elementId){
      var elem = document.getElementById(elementId);
      var tick = 0;

      var timer = setInterval(function(){
        if (tick < 100) {
          elem.style.left = elem.style.top = tick + "px";
          tick++;
        }else{
          clearInterval(timer);
          assert(tick == 100,
            "Tick accessed via a closure.");
          assert(elem,
            "Element also accessed via a closure.");
          assert(timer,
            "Timer reference also obtained via a closure.");
        }
      },10);
    }
    animateIt('box');
  </script>
</body>
</html>